# Normy pro spolehlivý software

### Příklady selhání – HW i SW

Přistávací modul EDM (Schiaparelli)
- přistávací manévr funguje, jak má
- po aktivaci padáku selhává měření rotace a akcelerace
- řídící systém usuzuje, že je sonda pod úrovní terénu
	- odhazuje padák a aktivuje brzdné trysky (ty ale nestačí)

### Spolehlivý software

- modelování řádově obtížnější než u HW (složitá primitiva, komplexní struktury)
- normy zaměřené na
	- **metriky** – řádky kódu, cyklomatická složitost, pokrytí testy, parametry na metodu, ...
	- **metodiky práce** – raději RUP než SCRUM
	- **dokumentace a trasovatelnost** – nutí to autory se zamyslet 
	- **formální modely** – lze dokázat správnost a generovat program
- code review zkušenými programátory
- důkladné testování

### ISO 25010 – System and software quality models

- **vnitřní kvalita systému** – ze zdrojového kódu
- **vnější kvalita systému** – posouzení externím hodnotitelem
- **uživatelská kvalita** – jak vnímá funkci uživatel v provozu
- kvalita závisí hlavně na procesu vývoje (používání best practices)

**Funkční vlastnosti**
- funkční úplnost (completeness)
	- do jaké míry funkce pokrývají požadované cíle
	- porovnání implementace s **případy užití**
- funkční správnost (correctness)
	- do jaké míry systém poskytuje správné výsledky
	- **traceability matrix** pro sledování pokrytí případů užití testy
- funkční vhodnost (appropriateness)
	- jak systém usnadňuje dosažení cílů

**Výkonové vlastnosti**
- chování v čase (time behavior)
	- splnění doby odezvy, charakteristiky průtoku (benchmarky, logování)
- využití zdrojů (resource utilization)
	- kolik zdrojů je potřeba, kolik zdrojů potřeba pro splnění požadavků
- kapacita (capacity)
	- pro jaké nejvyšší hodnoty zátěže systém plní požadavky (zátěžové testy)

**Kompatibilita**
- součinnost s jinými systémy (co-existence)
	- nakolik dokáže systém poskytovat služby ve sdíleném prostředí s jinými systémy
- interoperabilita (interoperability)
	- nakolik si dokáže systém vyměňovat informace s jinými systémy
+ využití standardů pro komunikaci

**Použitelnost**
- rozpoznatelnost (recognizability)
	- nakolik dokáží uživatelé poznat, že systém plní jejich potřeby
- naučitelnost (learnability)
	- jak se zlepšuje schopnost uživatelů používat systém v čase
- operabilita (operability)
	- Jak snadno se systém používá
- ochrana před chybami (user error protection)
	- jak chrání systém uživatele před jeho vlastními chybami
- estetika uživatelského rozhraní (user engagement)
	- UX, subjektivní hodnocení vzhledu
- přístupnost (inclusivity, self-descriptivness, user assitance)
	- jak je systém použitelný lidmi s handicapem

**Spolehlivost**
- vyspělost (maturity)
	- nakolik systém poskytuje služby za normálních podmínek
- dostupnost (availability)
	- jak je systém dostupný v případě potřeby
- odolnost vůči chybám (fault tolerance)
	- jak systém reaguje na HW nebo SW selhání
- zotavitelnost (recoverability)
	- nakolik se systém dokáže zotavit z přerušení nebo selhání, jak to ovlivní data

**Fault tolerant vs Fault avoidance**
- **odolnost k chybám** (fault tolerant)
	- systém pokračuje v provozu i když dojde k chybě
	- redundance, failover systémy, checkpoint a rollback
- **vyhýbání se chybám** (fault avoidance)
	- znemožním chyby vhodným návrhem a řešením
	- formální modely, intenzivní testy, přísně kontrolované procesy vývoje

**Bezpečnost**
- důvěrnost (confidentiality)
	- data jsou dostupná jen těm, kteří k nim mají mít přístup
- integrita (integrity)
	- jak moc SW brání / detekuje neoprávněnou modifikaci dat nebo neoprávněný přístup k datům
- nepopiratelnost (non-repudiation)
	- lze sledovat všechny události ke kterým v programu došlo, lze je zatajit
- autenticita (authenticity)
	- lze prokázat že entita je tím kým tvrdí že je?
- zodpovědnost (accountability)
	- lze spojit změny dat / akce v SW s konkrétními entitami / uživateli, lze toto spojení ztratit?
- odolnost (resistance)
	- nakolik dokáže systém fungovat když je pod záměrným útokem zvenčí

**Udržovatelnost**
- modularita (modularity)
	- nakolik je systém rozdělen na oddělené, nezávislé komponenty
- znovu použitelnost (reusability)
	- nakolik je možné části systému využít i jinde
- analyzovatelnost (analysability)
	- akolik je možné sledovat dopad změn na části produktu, jak snadno lze diagnostikovat a trasovat příčiny selhání systému
- modifikovatelnost (modifiability)
	- nakolik lze systém upravit bez zanášení chyb nebo snížení kvality existujícího systému
- testovatelnost (testability)
	- jak dobře lze stanovit testovací kritéria pro dostatečné ověření činnosti systému, existují testy pro jejich ověření?

**Flexibilita**
- adaptabilita (adaptability)
	- dá se systém upravit pro nový HW nebo operační prostředí, jak je to obtížné?
- škálovatelnost (scalability)
	- jak dobře systém snáší změny zátěže
- instalovatelnost (installability)
	- jak náročné je nasadit systém do specifického prostředí
- nahraditelnost (replaceability)
	- nakolik dokáže systém nahradit jiný, existující systém ve srovnatelném prostředí

**Uživatelská kvalita**
- posouzení z pohledu uživatelů
	- porovnání se specifikací
	- UX hodnocení, průzkumné testy
	- hodnocení práce s rizikem

### ČSN 50128 – Software pro drážní řídící a ochranné systémy

- specifická oborová norma
	- nemá být univerzálně aplikovatelná, určená pro věci které musí být spolehlivé
	- obsahuje konkrétní doporučení co dělat a nedělat
- obsahuje požadavky na
	- testování, verifikaci a validaci
	- řízení modifikací a změn
	- požadavky na vývojový proces (počínaje sběrem požadavků, konče nasazením a údržbou)
	- poznámky k doporučeným / nedoporučeným metodám a postupům

Analyzovatelnost programů
- cílem je jednoduchá statická analýza

Testování podle struktury
- jak volit data a pokrytí programu testy

Programovací jazyky

Struktura modulů
- jak navrhovat a programovat jednotlivé moduly

### MISRA

- kódovací standard pro jazyk C
	- omezení chyb vyplývajících z nevhodných konstrukcí
	- umožňuje statické ověření splnění některých z nich
- 22 základních skupin pravidel
	- velmi specifická, co je v programu povoleno a co ne
	- opatřena vysvětlením a postupem jak doložit (pokud to jde automaticky)

### W. E. Deming

- zakladatel hodnocení kvality
- řízení kvality v japonském průmyslu 1950 až 1960
- výrazné zlepšení pozice Fordu v 70. letech

+ celkově zaměřené na přesvědčování lidí aby dělali věci zodpovědně a dobře, protože kontrolní mechanismy stejně nefungují
+ lidé se přizpůsobí a naplní metriky tak aby vyšly co nejlépe, ne aby skutečně zlepšily stav věcí

### Komunikace se zákazníky

Je lepší problémy neskrývat a nebagatelizovat
- viz Intel a FDIV bug (1994)
	- chyba v dělení, šance na výskyt 1 : 9 000 000 000
	- Intel o ní věděl, po odhalení přesvědčoval že o nic nejde

Empirické studie ukazují že (odhadem)
- je 5x dražší sehnat nového zákazníka než udržet stávajícího
	- cena oprav a požadovaných úprav a ladění nad rámec dohodnuté smlouvy
	- ne vždy funguje vendor lock
- nespokojený zákazník řekne o problému 7 lidem z 20
	- katastrofy se šíří lépe a rychleji
- spokojený zákazník 3 lidem z 20