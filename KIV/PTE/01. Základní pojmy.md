# Základní pojmy

### Principy testování

- testování **ukazuje přítomnost defektů**, nikoliv jejich nepřítomnost
- **kompletní (vyčerpávající) testování není možné** (kombinace všech vstupů a podmínek)
- včasné testování **šetří čas i peníze**
- defekty se shlukují
- pesticidní paradox
- testování je závislé na kontextu (různé postupy v různých podmínkách)
- nepřítomnost defektů je klam

### Termíny

- programátor udělá **chybu (error)** nebo je chyba ve **specifikaci (návrhu)**
	- vlivem lidské chyby implementován **defekt** (defect, bug)
- **porucha (fault)** nastane, pokud se tato část kódu začne provádět
	- projev jednoho či více defektů
	- nemusí k ní dojít (např. mrtvý kód)
- **selhání (failure)** je projev poruchy, která způsobila
	- uvedení programu do nekonzistentního stavu
	- běh nezamýšlenou cestou
	- produkování nekorektního či neočekávaného výstupu
- výsledek selhání se objeví v **pozorovaném chování**
- popsaný rozdíl mezi očekávaným a pozorovaným chováním je **incident**

### Náklady na opravu defektu

- včasné testování šetří čas i peníze
- **Boehmův zákon**: Čím dříve se na defekt přijde, tím je jeho oprava levnější

### Verifikace versus validace

- **verifikace** - potvrzení, že SW vyhovuje specifikaci
	- Děláme SW správně?
- **validace** - kontrola, že SW vyhovuje požadavkům uživatele/zadavatele
	- Chce tohle uživatel? / Děláme správný software?

### Pozitivní a negativní testy

- **pozitivní testy**, verifikační testy, testy splněním (test-to-pass)
	- verifikace korektního (požadovaného) chování
	- **na počátku testování**, kdy může selhat i korektní vstup
- **negativní testy**, testy selháním, vynucení chyb (test-to-fail)
	- ověření chování za neakceptovatelných, abnormálních nebo neočekávaných podmínek
	- **až je SW stabilní** a vykazuje bezproblémovou základní funkcionalitu
- pozitivní i negativní testy dělány tak, aby **prošly**

### Chybné testy

- test, který dá opačný výsledek, než by fakticky měl
- **falešně pozitivní** (false positive)
	- hlášení chybné funkčnosti, když je správná
- **falešně negativní** (false negative)
	- falešné potvrzení funkčnosti, která je ale chybná
	- nebezpečná situace - defekt zůstává v kódu

#### Křehké testy

- **fragile / fragilní testy**
- funguje spolehlivě v určité verzi SW
- přechodem na jinou verzi SW začne **falešně pozitivně selhávat**
- příčinou např. změna pořadí položek v menu, změna atributu class

#### Nestabilní testy

- **flake testy**
- test fungující nestabilně - někdy selže, někdy projde, aniž by se měnil kód
- **falešně pozitivní selhání**
- příčinou např. nepřipravenost testu na responzivitu aplikace, pevná časová odezva

### Úrovně testování

- Boris Beizer definoval 5 úrovní vyspělosti testovacího procesu
- **úroveň 0**
	- testování = ladění (debugging)
	- testování používáno k odstranění defektů
- **úroveň 1**
	- testování má prokázat, že software funguje a shoduje se se specifikací
	- **demonstrační** - stejný cíl, jako mají vývojáři
	- **většinou pozitivní testy**
- **úroveň 2**
	- testování má prokázat, že software nefunguje (defekty, nesoulad se specifikací)
	- **destrukční** - opačný cíl, než mají vývojáři
	- **většinou negativní testy**
- **úroveň 3**
	- testování nic neprokazuje, ale snižuje riziko
	- **zvyšování důvěry v produkt**
	- testování se zaměřuje i na požadavky a návrh
- **úroveň 4**
	- testování je postup vedoucí k produkci SW s nízkou mírou rizika
	- **měření a zlepšování kvality SW**
	- testování je preventivní

### Terminologie vyhodnocení testu

- pozorování výsledku testu
- analýza shody pozorování s očekáváním
	- podle toho **prošel (pass)** nebo **neprošel / selhal (fail)**
- očekávaný výsledek stanoven orákulem (oracle) - člověk nebo počítač
- vyhodnocení může být
	- binární (správně / nesprávně)
	- dlouhý popis (proč je pozorované chování rozdílné s očekávaným)

### Priorita versus severita

**severita** (závažnost)
- nakolik defekt brání v používání aplikace (jak moc to štve uživatele)
- běžné úrovně
	- **S1 (Critical)** - není možné pokračovat (havárie, poškození dat), nelze to obejít (workaround)
	- **S2 (Major)** - závažné narušení funkčnosti, lze obejít
	- **S3 (Moderate / Minor)** - omezení vůči specifikaci (nepřirozené chování)
	- **S4 (Low / Trivial)** - jen menší nepříjemnosti (rozložení GUI, překlepy, vzácné defekty)

**priorita**
- pořadí, ve kterém se budou defekty opravovat (jak moc to vadí nám)
- běžné úrovně
	- **P1 (Critical)** - okamžitě opravit, překáží v testování nebo ve vývoji
	- **P2 (High)** - musí být opraveno co nejdříve, obtížný workaround
	- **P3 (Medium)** - opravit v rámci běžného plnění úkolů, jednoduchý workaround
	- **P4 (Low)** - nebrání uvolnění na trh, může být odložen či déle neopraven

### Členění testů

#### Statické vs dynamické testovací metody

**statické metody**
- nevyžadují spuštění programu, používání od raného vývoje
- procházení kódu, statická analýza (PMD)

**dynamické metody**
- probíhají nad spuštěným programem

#### Úroveň viditelnosti detailu kódu

**černá skříňka** (black box)
- neznáme implementaci, jen vstupy a očekávané výstupy (kontrakt)
- funkcionální testování

**bílá skříňka** (white / glass / clear / transparent box)
- znalost detailní implementace
- strukturální testování

**šedá skříňka** (gray box)
- částečná znalost implementace (ne zdrojový kód, ale vygenerované HTML)
- testy navrhovány jako u black boxu, ale použití postupů white box pro pokrytí kódu
- možnost **inteligentních testovacích scénářů**

#### Fáze testování

- **jednotkové (unit), testování komponent** (programátorské testy)
	- správná funkčnost nejmenších částí systému - metod a tříd
- **integrační testy**
	- správné chování podsystémů (modulů) navzájem
- **systémové testy**
	- obsáhlé scénáře napříč celým systémem
- **akceptační testy**
	- upevnění důvěry v systém
	- **uživatelské** (UAT) - převzetí produktu zákazníkem
	- **provozní** - akceptace systémovými administrátory
	- **smluvní** - vůči smluvním kritériím v době uzavření kontraktu
	- **regulační** - vůči předpisům, které musí být dodrženy
	- **alfa/beta** - před skutečným uvolněním produktu vybranými zákazníky

**prostředí**, kde se testuje
- **vývojové** - unit a integrační testy
- **testovací** - smoke testy, systémové testy, regresní testování
- **produkční** - beta testy, uživatelské akceptační testy

#### Dimenze kvality

**FURPS+**
- **funkcionalita** (**F**unctionality) - správné chování systému
- **použitelnost** (**U**sability) - uživatelská přívětivost
- **spolehlivost** (**R**eliability) - stejné chování za všech okolností (přetížení, výskyt selhání)
- **výkon** (**P**erformance) - dostatečná rychlost podle představ zákazníka
- **podporovatelnost** (**S**upportability) - snadnost instalace, kompatibilita s HW a SW konfiguracemi, údržba
- ostatní (**+**) - lokalizovatelnost, kompatibilita, bezpečnost, konzistence, ...

### Metriky

- měřítka a kritéria pro určení dosažené úrovně kvality
- metriky uvedeny v test reportu

#### Metriky založené na defektech

- dělení defektů dle severity a příslušnosti ke komponentám
- stav opravy defektu, kdo selhání objevil (tester, zákazník), ...
- odvozené metriky
	- **bug fix rate** - počet uzavřených incidentů / počet nalezených incidentů * 100
	- **rychlost nalezení defektu** - počet nalezených defektů / počet hodin

#### Metriky založené na testech

- pokud známe množinu testů
- prakticky jen na funkcionálních testech
- jednotka počtu testů - **test case**

#### Metriky založené na kódu

- odvíjejí se od **pokrytí kódu** testy (snadno a přesně zjistitelné)
- kolik procent příkazů, hran, podmínek a cest úspěšně otestováno

### Testovací pyramida

- vyšší úroveň abstrakce nahoře - např. testování UI
- čím vyšší úroveň, tím
	- pomalejší běh testů
	- dražší vytváření testů a údržba
- **automatizovat nižší úrovně** (unit, integrační testy)


## Projektová a produktová rizika

- **definice rizika**
	- kombinace **dopadu** (byznys riziko) a **pravděpodobnosti** (technické riziko)
- cíle projektu
	- čas - nutný na dodávku výstupů projektu
	- náklady - potřebné k dodání výstupů projektu
	- rozsah - výstupů projektu
	- kvalita - výstupů projektu

### Základní kategorie rizik

- **projektová**
	- dopad na dodávku v plánovaném čase, nákladech či rozsahu
	- testování je neovlivní
	- příklady: onemocnění klíčového člena týmu, zpoždění dodávky, neshoda s klientem
- **produktová** (kvalitativní)
	- ovlivňují některou z požadovaných či očekávaných vlastností / cílů produktu
	- testování je významně ovlivňuje - pomáhá snížit riziko
	- příklady: nesprávná funkčnost, nevyhovující rychlost, nesrozumitelná nápověda

### Fáze při řízení rizik

1. **identifikace rizik**
	- nalezení co nejvíce relevantních rizik
	- vyžaduje zkušenost, smysl pro detail, kreativitu
	- výstupem seznam pojmenovaných rizik (excel, speciální SW, myšlenkové mapy)
2. **analýza rizik**
	- pravděpodobnost výskytu a možný dopad
	- riziko = pravděpodobnost * dopad
3. **plánování opatření pro snížení rizika**
	- s ohledem na výšku rizika
	- cílem minimalizace nebo eliminace rizika (snížení dopadu či pravděpodobnosti)
4. **realizace opatření**
	- realizace plánovaných opatření
	- monitorování jejich efektivity, případné korekce
5. **monitoring rizik**
	- start celého cyklu od začátku
	- provádí se periodicky, po dokončení významné fáze nebo při podezření na problémy

### Produktová rizika

- standardem kontrolní seznamy (check list)
- kontrolní seznam kvantitativních charakteristik podle ISO 25010
	1. **bezpečnost**
		- auditovatelnost - možné dohledat, kdo a kdy provedl akci
		- autenticita - možné dokázat, že uživatel je tím, za koho se vydává
		- důvěrnost - data přístupná pouze tomu, kdo na ně má oprávnění
		- integrita - data chráněna proti neoprávněné manipulaci
		- neodmítnutelnost odpovědnosti - možné dokázat, že se aktivity uživatele udály
	2. **funkcionální přiměřenost**
		- kompletnost - funkcionalita kompletní vůči specifikaci
		- přesnost - funkcionality fungují správně a poskytují přesné výsledky
		- vhodnost - dispozice vhodné funkcionality pro dosažení požadovaného cíle
	3. **kompatibilita**
		- interoperabilita - schopnost výměny informací s jinými systémy
		- koexistence - schopnost fungovat při sdílení zdrojů / prostředí s jinými systémy
	4. **použitelnost**
		- atraktivnost - UI estetické a příjemné pro uživatele
		- odolnost proti omylům - UI zabraňuje dělání chyb
		- provozovatelnost - systém umožňuje snadné ovládání jeho funkcí
		- srozumitelnost - snadné rozpoznání, zda je systém vhodný pro potřeby uživatele
		- přístupnost - poskytování funkcí uživatelům s handicapy
		- zvládnutelnost - možnost snadného naučení efektivního používání
	5. **přenositelnost**
		- adaptabilita - možnost adaptace na jiné prostředí (HW, OS, ...)
		- instalovatelnost - snadná instalace a odinstalace
		- nahraditelnost - lze nahradit jiným produktem pro stejný účel a prostředí
	6. **spolehlivost**
		- dostupnost - funkčnost a dostupnost v okamžiku potřeby využití
		- odolnost proti poruchám - plnění funkce navzdory SW a HW poruchám
		- obnovitelnost - zotavení z přerušení či výpadku komponent
		- zralost - naplnění potřeb spolehlivosti za běžných provozních podmínek
	7. **udržovatelnost**
		- analyzovatelnost - analýza dopadů změn, diagnostika nedostatků a selhání
		- změnitelnost - efektivní modifikování bez zanášení defektů
		- modulárnost - oddělené vyměnitelné komponenty
		- testovatelnost - efektivní testování a ověření požadavků
		- znovupoužitelnost - systém či komponenty možné využít pro jiný systém 
	8. **výkonostní efektivita**
		- chování v čase - odezvy a doby zpracovávání dle požadavků
		- kapacita - splnění definovaných limitů např. na propustnost
		- využití zdrojů - využité systémové zdroje za běhu dle požadavků

### Testování založené na rizicích

- řízení testovacích aktivit podle analýzy produktových rizik
- čas a prostředky alokovány různým oblastem podle její rizikovosti
- vhodné, když není možné provést kompletní otestování
- druhy technik
	1. lightweight
		- minimum pravidel, vyšší flexibilita
		- pro dopad i pravděpodobnost pouze hodnoty **nízký** a **vysoký**
		- metodiky: PRAM, PRM, STS
	2. heavyweight
		- vyšší stupeň formality, nároků na dokumentaci, ...
		- v oblastech s vysokou mírkou rizik nebo kritických aplikací: lékařství, doprava, ...
		- metodika: FMEA

## Testovací prostředí

- různé typy testů - různé požadavky na testovací prostředí
- realizace nemusí být v kompetenci testovacího týmu
- ekonomický tlak na nejnižší náklady na provoz a pořízení TP

### Části testovacího prostředí

**hardware**
- klientská / koncová zařízení - počítače, tablety, mobily
- periferie klientských zařízení - tiskárny, skenery
- servery, datová úložiště
- síťové komunikační prvky

**software**
- operační systémy
- databáze
- komunikační SW
- aplikační SW

**oproti produkčnímu prostředí navíc**
- simulátory pro generování požadavků
- simulátory rozhraní přijímající požadavky z testované aplikace a vracející odpovědi
- nástroje pro automatizované, zátěžové testy, přípravu testovacích dat, přístup k DB, řízení testů (požadavky na testy, testovací případy, správa nalezených incidentů, reporting metrik a testů)

### Životní cyklus

**návrh**
- standardizované komponenty známé/používané ve firmě (typy serverů, databází, ...)
- známé šablony virtuálních serverů

**implementace**
- pozor na rezervu času při nákupu HW (omezeno při virtualizaci)
- inicializace TP včetně výchozích testovacích dat
- testy připravenosti TP dle připravených testovacích scénářů

**provoz**
- nestabilní testovaný software - náročné
- dodržovat instalační okna v rámci běžné pracovní doby

**zrušení**
- po dokončení projektu hned nerušit
- scénář uchovávání testovacích dat, odstranění vazeb na rušené prostředí
- řízené předání HW

### Klíčové procesy

**správa změn**
- vhodné popsat rozsah změny a odhadnout náklady na její testování

**správa konfigurací**
- parametry serveru, verze SW, periferie, sady testovacích dat, ...
- realizováno konfigurační databází s položkami
- funkční definovaná konfigurace je otestována a může být nasazována do produkce

**správa releasů**
- sada změn (HW, SW, procesů) pro nasazení a užívání najednou
- konsolidace požadavků pro testování a nasazení
- účast na řízení přípravy zadání do procesů
- monitorování analýzy, vývoje a testování
- plánování a organizace nasazení, vč. testerů na testy
- vyhodnocení výsledků releasu

**správa incidentů**
- pro maximální použitelnost TP pro testování
- reakce na neplánované události TP - havárie, výpadky - pro rychlou obnovu

**správa přístupů**
- zajišťuje, že se každý uživatel TP dostane tam, kam má (servery, DB, aplikace, logy)
- testeři testující z pohledu uživatele musí mít jen práva odpovídající příslušným rolím

**správa testovacích dat**

### Zjednodušení testovacího prostředí (v praxi)

- agregování TP do jednoho či dvou prostředí (staging)
- podobné HW i SW produkčnímu prostředí
- často testovací prostředí jako předstupeň staging

### Atributy TP

- **název** - činnost, pro kterou je prostředí + jeho identifikace 
- **zkratka** - jednoduchá hodnota pro komunikaci
- **funkce** - podrobnější popis poskytované funkcionality
- **výkonnost** - požadovaný výkon prostředí
- **shodnost s produkcí** - typy infrastruktury, verze SW komponent

### Běžně využívaná TP

| Název            | Zkratka | Funkce                                                  | Výkon | Shoda s produkcí |
| ---------------- | ------- | ------------------------------------------------------- | ----- | ---------------- |
| Pískoviště       | -       | prototypování, ověřování nástrojů                       | ne    | ne               |
| Vývojové         | DEV     | vývojové testy (unit, integrační)                       | ne    | ne               |
| Systémové testy  | SYS     | vývojové testování integrace, systémové testy           | ne    | ano, SW          |
| Integrační       | INT     | systémové integrační testy a UAT                        | ne    | ano, SW          |
| Předprodukční    | PRE     | zátěžové testy, technické akceptační, testy nasazení    | ano   | ano, HW i SW     |
| Podpora produkce | PRS     | simulace produkčních chyb, testování oprav, konfigurace | ne    | ano, SW          |
